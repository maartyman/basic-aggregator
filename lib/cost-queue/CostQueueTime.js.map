{"version":3,"file":"CostQueueTime.js","sourceRoot":"","sources":["CostQueueTime.ts"],"names":[],"mappings":";;;;;;AAAA,0DAAkC;AAIlC,MAAa,oBAAoB;IACxB,MAAM;QACX,OAAO,IAAI,aAAa,EAAE,CAAC;IAC7B,CAAC;CACF;AAJD,oDAIC;AAED,MAAM,aAAa;IACA,aAAa,CAAiC;IAE/D,IAAW,MAAM;QACf,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;IACnC,CAAC;IAED;QACE,IAAI,CAAC,aAAa,GAAG,IAAI,mBAAS,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;IAClD,CAAC;IAEM,IAAI,CAAC,iBAAsC;QAChD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC7C,CAAC;IAEM,GAAG;QACR,OAAO,IAAI,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC;IAClC,CAAC;CACF;AAED,SAAS,OAAO,CAAC,CAAsB,EAAE,CAAsB;IAC7D,IAAI,CAAC,CAAC,cAAc,KAAK,SAAS,EAAE;QAClC,IAAI,CAAC,CAAC,cAAc,KAAK,SAAS,EAAE;YAClC,OAAO,CAAC,CAAC;SACV;QACD,OAAO,CAAC,CAAC,CAAC;KACX;IACD,IAAI,CAAC,CAAC,cAAc,KAAK,SAAS,EAAE;QAClC,OAAO,CAAC,CAAC;KACV;IACD,OAAO,CAAC,CAAC,cAAc,CAAC,WAAW,GAAG,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC;AACrE,CAAC","sourcesContent":["import TinyQueue from 'tinyqueue';\nimport type { OperationTestResult } from '../aggregator-services/aggregatorService';\nimport type { CostQueue, CostQueueFactory } from './CostQueue';\n\nexport class CostQueueTimeFactory implements CostQueueFactory {\n  public create(): CostQueue {\n    return new CostQueueTime();\n  }\n}\n\nclass CostQueueTime implements CostQueue {\n  private readonly priorityQueue: TinyQueue<OperationTestResult>;\n\n  public get length(): number {\n    return this.priorityQueue.length;\n  }\n\n  public constructor() {\n    this.priorityQueue = new TinyQueue([], compare);\n  }\n\n  public push(aggregatorService: OperationTestResult): void {\n    this.priorityQueue.push(aggregatorService);\n  }\n\n  public pop(): OperationTestResult | undefined {\n    return this.priorityQueue.pop();\n  }\n}\n\nfunction compare(a: OperationTestResult, b: OperationTestResult): number {\n  if (a.costParameters === undefined) {\n    if (b.costParameters === undefined) {\n      return 0;\n    }\n    return -1;\n  }\n  if (b.costParameters === undefined) {\n    return 1;\n  }\n  return a.costParameters.timeSeconds - b.costParameters.timeSeconds;\n}\n"]}